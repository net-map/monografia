\chapter{Introdução}\label{chp:intro}

\section{Apresentação}\label{sec:presentation}

Com a modernização das tecnologias de telefonia móvel torna-se cada vez maior o
número de pessoas com celulares associados a tecnologias de rede, como WiFi, 3G e
4G, que tem o potencial de fornecer informações sobre seu usuário a todo momento, tais
como o conteúdo acessado por seus navegadores ou aplicativos, e também informações
sobre posição e deslocamento. Dados de localização por si possuem pouco valor, mas
quando aliados a outros conteúdos, é possível fornecer conteúdo personalizado em
tempo real, reativo ao ambiente, passando a oferecer um grande retorno por um pouco
mais de ocupação na banda.\par
Enquanto sistemas de posicionamento por satélite como GPS (EUA) ou GALILEO
(Europa), por um lado, conseguem precisar a posição do usuário em até centímetros em
um ambiente outdoor, por outro há uma dificuldade deste sistema em calcular o
posicionamento em lugares fechados, devido basicamente à atenuação dos sinais
causada pelas paredes e seus materiais.Tendo em vista o crescimento das cidades e
consequente aumento no número de construções as pessoas cada vez passam mais
tempo em ambientes fechados. A necessidade de serviços de localização indoor tem se
tornado cada vez mais crítica.\par
Respondendo a essa necessidade surgiram alternativas para o posicionamento em
ambientes fechado, entre eles há o uso da Identificação por Rádio Frequência (RFID -
Radio Frequency IDentification), do bluetooth, do Zigbee ou do Wi-fi. A determinação de
posicionamento via Wi-fi é uma tecnologia que usa os sinais modulados do Wi-fi para;
detectar a presença de um aparelho, em seguida o sistema é capaz de triangular a
posição deste aparelho a partir dos sinais recebidos pelo ponto de acesso. Um dos
primeiros exemplos de um sistema de posicionamento utilizando Wi-fi foi RADAR,
desenvolvido pela Microsoft, que também criou o RightSPOT que utilizava um ranking das
frequências moduladas pelos pontos de acesso, no lugar de usar a potência dos sinais
para determinar a posição do aparelho.\par
Tendo em vista este cenário e as condições tecnológicas atuais, nosso projeto procura
apresentar uma solução para localização de pessoas em ambientes fechados, como
shoppings e eventos em galpões. Para tal, será combinado o usa de Big Data à
tecnologia de Wi-fi já citada e ainda implementando um algoritmo de machine learning. O
Big Data, que possui como uma de suas principais características a capacidade de
armazenar uma grande quantidade de dados, será usado para armazenar todas as
leituras de intensidade dos sinais feitas durante uma fase inicial, chamada de treinamento.
À partir dessa larga quantidade de dados recebidos serão empregados algoritmos de
machine learning processando-os para permitir que o sistema consiga determinar a
posição do usuário dentro do ambiente mapeado anteriormente.\par
Esta abordagem se mostra interessante ao ponto de que sua implementação não
necessita configuração particular na rede que será usada, uma vez que se baseia em
leituras feitas pelo aparelho móvel e no processamento dos dados feitos em um servidor
em nuvem. Também se destaca o fato de que em decorrência do machine learning à
medida de que o sistema é usado em uma determinada localidade a precisão tende a
aumentar, uma vez que cada vez há mais dados para serem consultados para
"Aprendizado". Esse approach difere de outro também amplamente empregado em esquemas de localização indoor, que é o de modelar o próprio sinal de Wi-Fi, deduzindo a sua distância a partir da intensidade medida. Esse método se torna ineficiente porque se torna necessário que sejam conhecidas as coordernadas de todos as APs locais, e também o próprio modelo de atenuação dos sinais RSSI de WiFi sofrem todo o tipo de interferência tornando difícil a obtenção de uma boa precisão.

\section{Metodologia}\label{sec:metodo}

	O projeto pode ser dividido em dois módulos principais: aquisição de dados e localização. O módulo de aquisição será desenvolvido com a ajuda de testes em Shopping Centers de São Paulo, colhendo dados das redes wireless através de um aplicativo Android feito especialmente por isso, durante todo o desenvolvimento do projeto. Esses dados serão úteis para calibrar o sistema de Machine Learning que será desenvolvido em paralelo na linguagem estatística R. Os dados são enviados do aplicativo Android para o sistema de Machine Learning através de uma API construída na linguagem Ruby. O módulo de localização consistirá num aplicativo Android que confirmará as posições colhidas anteriormente no módulo de aquisição de dados, usando para isso os resultados obtidos com o Machine Learning.
	
\section{Fundamentação Teórica}\label{sec:fundTeo}
A teoria de Machine Learning está sendo baseada no curso "Machine Learning" do Coursera, ministrado por Andrew Ng (Professor associado da Faculdade de Stanford). Técnicas de tratamento de dados estão sendo aprendidas no curso (Também do Coursera) ?Getting and Cleaning Data?, ministrado por diversos professores da Universidade John Hopkins. Os fundamentos de Machine Learning se baseiam primeiramente em álgebra linear, no tratamento de matrizes de dados, sendo necessário diversas multiplicações de matrizes com dimensões de mais de 1000 linhas e colunas.\par
Em segundo lugar, temos algoritmos de otimização de funções de custo, esses usando os gradientes numéricos dessas funções para que se ache um mínimo global ou local delas em função dos parâmetros que desejamos minimizar com a técnica de Machine Learning. Com base no curso do Coursera, já foram implementados algoritmos de machine learning capazes de detectar ?spans? em uma caixa de e-mails (Usando redes neurais) e um algoritmo de reconhecimento de dígitos manuscritos, esse implementado tanto em redes neurais como regressão logística (com diversas classes). Também foi feito um exercício de tratamento de dados usando o popular aplicativo de mensagens Whatsapp, onde foram usados backups de mensagens para criar estatísticas de usuários, como por exemplo, a palavra que eles mais falam ou a quantidade de vezes que tal palavra foi escrita. Todos esses exercícios foram implementados em R e Matlab.

\chapter{Especificação}\label{chp:espec}

\section{Requisitos}\label{sec:req}

\subsection{Requisitos Funcionais}
- Enviar dados sobre a intensidade dos sinais de Wi-Fi ao servidor. \par
- Retornar a posição do usuário baseado nos dados enviados.\par
- Disponibilizar uma API para ser usada por outros aplicativos.\par
- Implementar machine learning com redes neurais para o sistema "aprender" as posições do ambiente.

\subsection{Requisitos Não-Funcionais}

- A margem de erro para a posição do usuário deve ser de 10\%. \par
- O sistema deve ser transparente ao usuário.\par
- O MTBF deve ser de 10000 horas.\par
- O tempo de resposta para a aquisição dos dados dos sinais deve ser da ordem de milissegundos.\par
- O tempo de resposta do serviço para definição da posição deve ser da ordem de milissegundos.\par
- Consumo de bateria médio de 200 mAh por hora.\par
- MTTR do sistema deve ser no máximo de 8h.\par
- No futuro deve ser empregada uma redundância nos servidores para otimizar a disponibilidade e segurança do sistema.

\section{Pontos de Vista}\label{sec:req}
\subsection{Ponto de Vista da Empresa}
Este projeto deverá criar um sistema de localização precisa em ambientes fechados, utilizando como parâmetros as intensidades de sinais redes sem fio próximas. O resultado deste projeto incluirá duas aplicações:\par
Aplicativo para o celular com dois módulos utilizados para capturar informações das redes sem fio próximas e enviá-las servidor, além de receber resultados deste servidor e exibi-los para o usuário;\par
Aplicação em nuvem que receberá os dados dos celulares e responderá com a localização do usuário.\par
Para tal serão feitas análises estatísticas do comportamento e flutuação do sinal de Wi-Fi em diversas medições e com aparelhos de celular diferentes e posteriormente, estes dados serão analisados por um algoritmo de inteligência artificial baseado em machine learning, para que a localização seja definida.
\subsection{Ponto de Vista da Informação}
As informações processadas pelo sistema seguirão dois fluxos. No primeiro as intensidades dos sinais provenientes dos pontos de acesso de redes sem fio serão capturadas pelo sensor do celular e registradas pelo módulo de aquisição de dados do aplicativo. Em seguida, estas informações serão enviadas para o servidor para que recebam o devido tratamento.\par
Após o período de treinamento do sistema o segundo fluxo será possível. Nele após o dispositivo móvel enviar os sinais capturados por um usuário regular, o servidor deve executar seu algoritmo de machine learning e retornar à posição que o usuário se encontra dentro do prédio previamente estabelecido, usando como base estes dados enviados.\par
A troca de dados em ambos os fluxos será feita usando o formato JSON, este formato é muito utilizado principalmente quando é necessária a implementação de tabelas de bancos de dados por conta de sua simplicidade para manipular as informações representadas.
\subsection{Ponto de Vista da Computação}
O sistema será composto por duas partes funcionais, a primeira é o aplicativo desenvolvido para dispositivos Android, ele será responsável pela captura dos dados, em seguida ele organizará as informações coletas no formato JSON e finalmente realizará a transmissão por meio da rede à qual o dispositivo estiver conectado, uma rede 3G/4G ou pela conexão a uma rede Wi-Fi disponível.\par
A segunda parte é o servidor em nuvem, que deverá processar os dados executando o algoritmo de machine learning e em seguida disponibilizará os resultados obtidos para posterior consulta feita quando forem requisitadas informações a respeito do ambiente fechado já mapeado anteriormente, retornando a posição do usuário.
\subsection{Ponto de Vista da Engenharia}
Para o uso do sistema será necessário que o dispositivo móvel que executar o aplicativo tenha uma antena de WiFi, para que possam ser realizadas as medições de intensidades dos sinais. Tais dados serão enviados pela própria antena de WiFi usando a rede que estiver conectada ou pela antena de 3G/4G usando as redes móveis para o servidor. O serviço funcionará em uma máquina virtual hospedada no serviço Heroku, esta máquina deverá suportar uma grande quantidade de dados, além de ter um poder de processamento capaz de suportar a execução do algoritmo de machine learning.\par
É necessário também que exista uma estrutura mínima no local a ser mapeado, deve existir um número mínimo de pontos de acesso de rede sem fio suficiente para englobar todo o ambiente. Esta cobertura não deve ser apenas de pelo menos um sinal Wi-Fi na parcela de área, é indispensável que mais de um sinal atinja cada ponto para que seja possível haver a determinação do ponto escolhido.
\subsection{Ponto de Vista da Tecnologia}
O processamento e aplicação dos algoritmos de machine learning serão feitos por meio da linguagem R. O aplicativo é feito para a plataforma Android e o servidor é implementado na plataforma Ruby on Rails, hosteado em um serviço chamado Heroku, para pequenas aplicações que devem rodar na nuvem.
